# 2026-02-15 — kelly-dashboard ops + UX; meeting-time-tracker Supabase pivot; Chrome CDP

## kelly-dashboard: Hosted on localhost:3000 (production)
- Dashboard is hosted via launchd + `next start` (NODE_ENV=production) on port 3000.

## kelly-dashboard: Declutter UX controls (Story 1.2)
- Implemented collapsible sections for all major home sections with persisted collapsed state.
- Added sticky View Controls bar with:
  - Descriptions toggle
  - Collapse all / Expand all

## Decision: Remove Compact toggle
- Operator feedback: Compact toggle provided no value.
- Implemented: removed Compact toggle from View Controls and removed supporting compactMode preference/state.

## Sessions API reliability
- `/api/sessions` now reads OpenClaw Gateway via `/tools/invoke` (`sessions_list`) using the configured token and parses `details.sessions` output shape.
- kelly-dashboard: updated sessions endpoint + UI to surface explicit `channel/lastChannel` from gateway session payload (avoid inferring channel from sessionKey).

## kelly-dashboard UX hotfix: make section header fully clickable
- Changed CollapsibleSection so the entire header row (including whitespace) toggles collapse, not just the title text.
- Attempted to use Codex/Barry for the tweak; run hung in context-reading/thinking, so it was killed and the minimal Tailwind patch was applied manually.
- Commit: `d8ec2af`
---

## Decision update: meeting-time-tracker should be Firebase-only
- New direction: remove ALL Supabase references and go pure Firebase (Auth + Firestore + calendar sync wiring).
- Firebase projectId: `meeting-time-tracker-aaf`.
- Redirect URL stays: `http://localhost:3000/auth/callback`.
- Important correction: the migration must be applied in `projects/meeting-time-tracker-web` (Next.js app), not `projects/meeting-time-tracker` (iOS/artifacts).

## Status
- Barry began a Firebase migration pass but initially targeted the wrong directory; redirected to run against `projects/meeting-time-tracker-web`.
- Spawned parallel implementation packets for the Firebase-only migration (A/B/C/D). **All A/B/C/D completed** and were reconciled/merged into `projects/meeting-time-tracker-web` `main`.
- `npm run build` passes on `main` after merge.

## Kelly dashboard visibility gotcha
- Project Details “Active Subagents” list is driven by on-disk `projects/<id>/project-state.json` (specifically the `subagents` array). Spawning work via sessions/subagents won’t show up unless that file is updated (or the dashboard is augmented to join live sessions).

## Operator preference: QA means deployable
- New SOP request: whenever a project is ready for user QA, it should be **deployed to a dev/QA server** (at minimum) so the user can test immediately (not just local dev).
- Implemented: deployed `meeting-time-tracker-web-qa` to Vercel and added Project Lead QA/testability SOP to `AGENTS.md`.

## MEMORY NOTE (kelly-dashboard UI): Sessions cards height + wrapping fix
- Sessions cards were uneven because long agent names like `kelly-improver` wrapped to 2 lines.
- Fix in `projects/kelly-dashboard/components/factory-view/now-running.tsx`:
  - Link wrapper: `className="block h-full"`
  - Card: fixed height `h-[152px] w-full` (not `min-h`)
  - `agentName` span: `truncate whitespace-nowrap` (no wrapping)
  - Grid containers: add `items-stretch`
  - Label fallback: `session.label || "\u00A0"`
- Also: “Sync” refers to Finder folder `/Users/austenallred/clawd/sync/`.
- Reference doc: `/Users/austenallred/sync/refactor-plan-phase-1.md`.

## Browser automation decision: Chrome Relay vs Playwright CDP
- Chrome Relay requires a user gesture to attach a tab (by design).
- Attempted to attach Playwright to the *primary* Chrome profile via CDP; Chrome now requires a **non-default `--user-data-dir`** for remote debugging.
- Implemented a persistent CDP automation profile at `~/.openclaw/chrome-cdp-profile` and a launcher/LaunchAgent; user must sign in once in that profile for browser-based automation.
- Best path for Supabase is CLI-first once a Supabase PAT is provided (one-time).

## Skill cleanup: Removing deprecated browser automation
- **Decision:** Remove `chrome-relay-driver` skill entirely.
- **Rationale:** Persistent CDP Chrome profile (`web-browser` skill) eliminates need for per-tab attach clicks.
- **Action:** Deleted `skills/utilities/chrome-relay-driver/` from repo.

## Web-search skill migration (pending)
- **Decision:** Replace Brave `web_search` and `web_fetch` with custom Docker-based search API for better rate limits.
- **Status:** Waiting on user to provide Docker container details (image name, API endpoint, auth).
- **Plan:** Create new `skills/utilities/web-search/` skill with wrapper script to start container + query API.
