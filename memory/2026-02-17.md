# 2026-02-17 - Daily Memory Log

## Projects Started

### daily-todo-tracker (12:26 CST)
- **Type:** Fast Mode Greenfield (Barry Fast Track)
- **Request:** Operator wants simple to-do tracking app for daily/weekly tasks
- **Tech stack:** Next.js + Tailwind + localStorage/Supabase + Vercel
- **Status:** Barry planning in progress (spawned 12:29 CST)
- **Estimated stories:** 5-8 stories
- **Session:** agent:project-lead:project-daily-todo-tracker
- **Path:** `/Users/austenallred/clawd/projects/daily-todo-tracker/`

## Bugfixes

### kelly-dashboard - Thinking Block Rendering (12:39 CST)
- **Issue:** Dashboard showing "Raw Message (unrecognized format)" for Project Lead session logs
- **Root cause:** OpenClaw now uses new message format with `content` array containing thinking/toolCall blocks
  - Old format: `{ thinking: "...", toolCalls: [...] }` (top-level properties)
  - New format: `{ content: [{ type: "thinking" }, { type: "toolCall" }] }` (array of blocks)
- **Fix:** Updated `/components/subagent-view/formatted-message.tsx`
  - Added `extractThinkingBlocks()` and `extractToolCalls()` to parse content array
  - Maintained backward compatibility with old format
  - Now renders BOTH thinking and tool calls when they appear together
- **Result:** Dashboard now properly displays üí≠ thinking blocks and üîß tool calls

## Lessons Learned

### Dashboard Timing Issues
- kelly-dashboard polls project directories and tries to load state files immediately
- When new projects start, Barry hasn't created files yet ‚Üí Next.js errors in console
- Expected behavior: Errors disappear once planning completes (1-2 minutes)
- **Potential improvement:** Add error handling to show "Planning in progress..." instead of raw errors

### Message Format Evolution
- OpenClaw message format has evolved to support thinking blocks in content array
- UIs need to handle both old and new formats during transition period
- Always check for content in both locations: top-level properties AND content array
- Thinking blocks may appear alongside tool calls in same message (render both)

## Monitoring Improvements (13:32 CST)

### Issue: fleai-market-v4 Stuck Sessions Not Detected
- **Problem:** 2 Codex sessions stuck for 60-70 min without Kelly alert
- **Root causes:**
  1. Stuck threshold too high (90 minutes)
  2. No implementation-state.md file ‚Üí no granular progress visibility
  3. PL recovered autonomously without escalation (good!) but Kelly didn't know
- **Sessions affected:** Story 4.5 (Global Search), Story 4.7 (Shopping Cart)
- **Outcome:** PL detected stuck sessions, committed work, spawned next wave (autonomous recovery worked)

### Changes Made
1. **HEARTBEAT.md updated:**
   - Stuck threshold: 90 min ‚Üí 60 min
   - Escalation threshold: 3 hours ‚Üí 2 hours
   - Skip duration after "all good": 60 min ‚Üí 45 min
   - Added requirement for implementation-state.md during implementation stage

2. **implementation-state.md requirement:**
   - Now required for all projects in implementation stage
   - Contains: current wave, active sessions (with PIDs), completed stories, dependencies
   - Update frequency: after wave completion, subagent spawn, stuck recovery
   - fleai-market-v4 PL already created it (13:25 CST) - ahead of the requirement!

3. **factory-state.md updated:**
   - Documented monitoring improvements
   - Added fleai-market-v4 compliance status

### Lessons Learned
- **Silent success can look like failure:** PL recovered autonomously (good design!) but operator couldn't see it
- **State files are the eyes:** Without implementation-state.md, Kelly only sees project-state.json timestamps
- **Tighter thresholds catch issues faster:** 60 min vs 90 min means ~30 min earlier detection
- **PL doesn't need to announce recoveries to Kelly:** As long as PL handles stuck sessions correctly and updates state files

## daily-todo-tracker Complete (13:36 CST)

### Status: READY FOR QA
- **Total time:** 1 hour 10 minutes (12:26 ‚Üí 13:36 CST)
- **Stories completed:** 7/7 (1.1-1.7)
- **Track:** Barry Fast Mode Greenfield
- **QA URL:** http://localhost:3001

### What Barry Built
1. Story 1.1: Next.js project setup with TypeScript + Tailwind
2. Story 1.2: Add task functionality (title, scope: today/week/anytime)
3. Story 1.3: Complete/incomplete toggle
4. Story 1.4: Delete tasks
5. Story 1.5: Filter by scope (All/Today/Week/Completed)
6. Story 1.6: localStorage persistence
7. Story 1.7: UI polish + responsive design

### Recovery Note
- Story 1.7 session closed prematurely but work was complete
- Project Lead detected, committed all files, verified build
- Same pattern as fleai-market-v4 Codex sessions (work completes, session dies before final commit)

### Validation
- Barry Fast Mode workflow: ‚úÖ Works as designed
- Planning ‚Üí Implementation ‚Üí QA handoff: ‚úÖ Smooth
- Estimated 5-8 stories, actual 7 stories: ‚úÖ Accurate
- Total time ~1 hour: ‚úÖ Fast Mode lived up to name

## fleai-market-v4 Status Check (13:24 CST)

### Operator Request
"fleai project seems stuck, can you check in with that PL and see why it's subagents/the PL didn't report the stuckness"

### Findings
- **Issue:** 2 Codex sessions (story 4.5, 4.7) stuck for 60-70 min without Kelly alert
- **Reality:** Sessions completed work but died before commit (known Codex pattern)
- **PL response:** Already recovered autonomously - committed work, spawned next batch
- **Current status:** 35/68 stories (51%), Wave 6 active (4 stories)

### Why No Alert
1. Stuck threshold too high (90 minutes) - sessions stuck for 60-70 min (below threshold)
2. No implementation-state.md file - Kelly couldn't see granular progress
3. PL recovered autonomously without escalation (good design!)

### Actions Taken
See "Monitoring Improvements (13:32 CST)" section above.

## Gateway Configuration Update (10:17 CST)

### Change Applied
- **Action:** config.patch to add explicit 'main' agent definition
- **Purpose:** Ensure Kelly Router (main agent) gets 5-minute heartbeat polls
- **Context:** Matrix DMs should use main agent by default
- **Doctor hint:** `openclaw doctor --non-interactive` (not run yet)
- **Status:** ‚úÖ Gateway restarted successfully

## Heartbeat Monitoring Activity (10:17-14:18 CST)

### Pattern Observed
- Kelly receives heartbeat polls every ~5 minutes as configured
- Checks fleai-market-v4 implementation-state.md timestamp (last: 13:26 CST)
- Updates heartbeat-state.json with lastProjectCheck timestamps
- All projects showing normal operation:
  - fleai-market-v4: "status: ok, stage: implementation"
  - calculator-app, kelly-dashboard, daily-todo-tracker: surfaced for QA

### QA Surfacing Success
- **13:38 CST:** daily-todo-tracker moved to userQA stage
- **13:40 CST:** Kelly detected and surfaced: "üß™ **daily-todo-tracker** ready for user QA: http://localhost:3011"
- **Storage:** Added to heartbeat-state.json surfacedQA list
- **Result:** Operator notified successfully

## Dependency-Driven Spawning Migration (14:30-15:30 CST)

### Problem
Project Lead was using artificial batch/wave parallelization (spawn N stories, wait for ALL to complete, spawn next batch). This caused cascading stalls when any single story in a wave failed or hung.

### Root Cause
PL AGENTS.md had conflicting instructions across 6 locations ‚Äî some said "waves", some said "dependency-driven". PL followed the wave approach.

### Fix Applied
- **Updated PL AGENTS.md** (`/Users/austenallred/.openclaw/workspace-project-lead/AGENTS.md`): Removed ALL 6 batch/wave references
- **New behavior:** Spawn stories immediately as their `dependsOn` arrays are satisfied (from Bob's `stories-parallelization.json`)
- **Both Fast Mode and Normal BMAD** use same dependency-driven strategy
- Old PL session died; fresh PL instantiated via `project-lead-instantiator` skill

### Key Decision
Bob's `stories-parallelization.json` is the single authority for story dependencies. Each story has individual `dependsOn` arrays. PL must use these directly ‚Äî no artificial grouping.

## fleai-market-v4 Progress Audit (15:00 CST)

### Accurate Story Count
- **37/68 complete (54%)** ‚Äî up from earlier estimates
- **Completed:** 1.1-1.8, 2.1-2.8, 3.1-3.7, 4.1-4.7, 5.1, 5.2, 8.1, 8.2, 8.6, 8.7, 9.1
- **Active (uncertain):** 2.9-v2 (PID 96278), 4.8-v2 (PID 96279) ‚Äî may be dead Codex sessions
- **Remaining:** 31 stories

### Codex Death Pattern (3 occurrences)
1. **Wave 4 (06:09):** All 6 PIDs (10256-10261) died immediately after spawn
2. **Wave 5 (10:28):** 2/3 PIDs (68304/68305) died after completing work; 1 (68306) hung at 0% CPU
3. **Wave 6 (14:24):** 2/4 PIDs (90927/90928) died at 70 min with incomplete work; 2 (90926/90929) completed but died before commit
- **Root cause unknown** ‚Äî possibly Codex resource limits or stability issue

### PL Session State
- `agent:project-lead:fleai-market-v4`: 184k/200k context (92%) ‚Äî approaching limit
- Matrix-based PL session: 6.5h stale (was installing BMAD TEA module)
- `agent:project-lead:main`: Running, HEARTBEAT_OK

## Active Context (15:30 CST)

- **Factory projects:** 3 ready for QA (calculator-app, kelly-dashboard, daily-todo-tracker), 1 in implementation (fleai-market-v4)
- **Operator timezone:** America/Chicago (CST)
- **Kelly session:** Main session (direct chat with operator) ‚Äî 3 compactions today
- **Current focus:** fleai-market-v4 implementation with dependency-driven spawning
- **fleai-market-v4 status:** 37/68 stories (54%), 2 active subagents (status uncertain), PL at 92% context
- **Key risk:** PL context exhaustion ‚Äî may need fresh session soon
- **Heartbeat health:** ‚úÖ All systems operational
- **Next:** Monitor fleai-market-v4 PL, verify dependency-driven spawning works, check if active Codex PIDs are alive

## Factory Architecture Refactor (19:00-19:59 CST)

### Problem
The `factory-architecture` skill contained 37KB of comprehensive documentation about Research Lead and Project Lead flows. This was wrong because:
1. Factory architecture is NOT a skill ‚Äî it's documentation
2. Skills should be executable tools/workflows, not pure reference material
3. Duplication between skill and `docs/` created maintenance burden

### Solution: Move to docs/ as Source of Truth
- **Killed** `skills/factory/factory-architecture/` skill entirely
- **Created** canonical docs in `docs/`:
  - `factory-overview.md` (5822 bytes) ‚Äî high-level hierarchy, 4 modes, git workflow, BMAD reference
  - `project-lead-flow.md` (8508 bytes) ‚Äî complete PL spec: all modes √ó phases, dependency spawning, state mgmt
  - `research-lead-flow.md` (renamed from `research-lead-v1-detailed.md`) ‚Äî canonical RL flow doc
- **Archived** 5 superseded drafts to `docs/archive/`
- **Committed** as `f04767c`: "refactor: move factory architecture from skill to docs/"

### New Rule
AGENTS.md files should reference docs/ for flow specs, not duplicate architecture documentation.

## Agent Readiness Audit (19:00-19:59 CST)

### Audit Findings
Kelly-improver performed comprehensive readiness audit across all 14 agents:
- **Normal Greenfield:** ‚ö†Ô∏è works but has bugs (git strategy mismatch, missing dependency-graph docs)
- **Fast Greenfield:** ‚ö†Ô∏è works but messy (Barry trimming needed)
- **Brownfield modes:** ‚ö†Ô∏è partially ready (John/Sally/Winston missing EDIT mode)
- **Research Lead:** ‚ùå not ready (5 agents didn't exist)

### Agent AGENTS.md Rewrites

#### Project Lead (556 ‚Üí 160 lines)
- **Before:** 17.8K of duplicated flow descriptions, wave logic, conflicting instructions
- **After:** 6.4K of behavioral rules + references to `docs/project-lead-flow.md`
- **Key fix:** Removed all remaining batch/wave language (was in 6 locations)

#### Bob (33 ‚Üí 97 lines)
- **Critical gap:** Bob didn't know he was responsible for creating `dependency-graph.json`
- **Added:** Full documentation of `stories-parallelization.json` format, rules, brownfield handling
- **Format:** `{ "stories": [{ "storyId": "1.1", "dependsOn": ["1.2"], "title": "..." }] }`

#### Amelia (dev branch git strategy)
- **Before:** AGENTS.md said branch-per-story, but `docs/project-lead-flow.md` + practice said `dev` branch
- **Fixed:** All work on `dev` branch, pull --rebase on conflicts, descriptive commit messages
- **Consistency:** Now matches actual practice and docs

#### John (Strategist) - Brownfield EDIT mode
- **Before:** Only CREATE workflow (create-prd)
- **After:** Added `edit-prd` workflow for brownfield
  - Read existing PRD first
  - Update sections while preserving structure
  - Continue epic numbering (e.g., if PRD has Epic 1-3, add Epic 4+)
- **Epic workflow:** CREATE-only for greenfield, ADD mode for brownfield (append to existing)

#### Sally (UX) - Brownfield EDIT mode
- **Before:** Only CREATE workflow (create-ux-design)
- **After:** Added `edit-ux-design` workflow
  - Read existing design first
  - Preserve design system/component choices
  - Update or append screens as needed

#### Winston (Architect) - Brownfield + document-project
- **Before:** Only CREATE workflow (create-architecture)
- **After:** Added 3 workflows:
  - `edit-architecture` ‚Äî brownfield updates
  - `document-project` ‚Äî analyze existing codebase, generate project context (was unassigned)
  - `generate-project-context` ‚Äî maps to document-project
- **Confirmed:** Winston handles `document-project` (analyzes architecture, fits BMAD Architect role)

#### Barry (Fast Mode) - Trimmed from 396 ‚Üí 100 lines
- **Before:** 80% was dummy project plan examples (300+ lines of Lorem Ipsum-style bloat)
- **After:** Just the instructions and workflow rules
- **Kept:** Fast Mode greenfield/brownfield workflows, audit mode

#### Mary (Business Analyst) - Dual Context
- **Before:** Only BMAD context (brainstorming, research, product brief)
- **After:** Two contexts depending on spawner:
  1. **BMAD Planning** (spawned by PL) ‚Äî standard analyst workflows
  2. **Research Lead Pipeline** (spawned by RL) ‚Äî Phase 1 (discovery), Phase 4 (selection), Phase 5 (deep dive)
- **Randomization mandate:** Each RL session, intentionally vary approach (industries, sources, angles)

### Research Lead + 4 CIS Agents Created

#### Research Lead (new agent)
- **Workspace:** `/Users/austenallred/.openclaw/workspace-research-lead/`
- **AGENTS.md:** Full 6-phase pipeline (discovery ‚Üí registry ‚Üí CIS ideation ‚Üí selection ‚Üí deep dive ‚Üí package)
- **Subagents:** mary, carson, victor, maya, quinn
- **Gateway config:** Registered in `agents.list` with `allowAgents` array
- **Model:** Sonnet 4.5
- **Purpose:** Autonomous SaaS product idea generation (no human interaction)

#### Carson - Brainstorming Coach (CIS)
- **Workspace:** `/Users/austenallred/.openclaw/workspace-bmad-cis-carson/`
- **AGENTS.md:** SCAMPER, divergent thinking, "yes, and..." methodology
- **Spawned by:** Research Lead during Phase 3 (CIS Ideation)
- **Model:** Sonnet 4.5
- **Output:** 3-5 distinct SaaS solution concepts per pain point

#### Victor - Innovation Strategist (CIS)
- **Workspace:** `/Users/austenallred/.openclaw/workspace-bmad-cis-victor/`
- **AGENTS.md:** Blue Ocean Strategy, disruption theory, market arbitrage
- **Model:** Sonnet 4.5
- **Focus:** Identify untapped markets and strategic differentiation

#### Maya - Design Thinking Coach (CIS)
- **Workspace:** `/Users/austenallred/.openclaw/workspace-bmad-cis-maya/`
- **AGENTS.md:** Empathy maps, "How Might We?" questions, user delight
- **Model:** Sonnet 4.5
- **Focus:** Human-centered solutions

#### Quinn - Creative Problem Solver (CIS)
- **Workspace:** `/Users/austenallred/.openclaw/workspace-bmad-cis-quinn/`
- **AGENTS.md:** TRIZ, systems thinking, root cause analysis
- **Model:** Sonnet 4.5
- **Focus:** Solve real problem underneath surface complaints, elegant solutions

### Cleanup
- **Removed stale workspaces:** `workspace-bmm-john` (duplicate), `workspace-kelly-refactor` (unused)
- **Cleaned Amelia workspace:** Removed 11 leaked artifacts (fleai-market/, firebase-debug.log, story-*.md, etc.)

### Commit
- **SHA:** `8342cc0`
- **Message:** "major: agent audit - rewrite AGENTS.md for all modes, create RL + CIS agents"
- **Files changed:** 3 files (docs, factory-state.md, memory/2026-02-17.md)
- **Impact:** +804 insertions, -495 deletions

### Status
‚úÖ **All 4 PL modes ready:** Normal/Fast √ó Greenfield/Brownfield
‚úÖ **Research Lead ready:** Agent + 4 CIS agents + Mary dual-context support
‚úÖ **Documentation consolidated:** docs/ is source of truth
‚úÖ **Git strategy consistent:** `dev` branch everywhere

### Next Steps (operator's choice)
1. Test Research Lead autonomous run (first smoke test)
2. Continue fleai-market-v4 implementation with updated PL AGENTS.md
3. Decide if fleai-market-v4 PL needs fresh session (184k/200k context)

## Research Lead Test Launch (16:13 CST)

### Spawn Details
- **Session:** `agent:research-lead:subagent:0846df01-4562-4255-a586-55698bb67dc0`
- **Label:** `research-20260217-1613`
- **Model:** Sonnet 4.5
- **Timeout:** 1 hour (3600s)
- **Cleanup:** keep (preserve session for debugging)

### Workflow Launched
1. Phase 1: Mary discovering pain points (12-17 min)
2. Phase 2: Registry check & registration (2 min)
3. Phase 3: CIS ideation ‚Äî spawn 4 personas (5-8 min)
4. Phase 4: Mary selecting best solution (5-8 min)
5. Phase 5: Mary competitive deep-dive (8-12 min)
6. Phase 6: Compile intake.md (4-5 min)

### Expected Outcome
- **Timeline:** 36-52 minutes (target: ~40 min)
- **Output:** `projects-queue/<project-name>-YYYY-MM-DD-HHMM/intake.md`
- **Subagents spawned:** Mary (3√ó), Carson, Victor, Maya, Quinn
- **Deduplication:** 3 registry checkpoints (Phases 2, 4, 6)

### Gateway Config Update
- Added Kelly Router spawn permissions: `allowAgents: ["research-lead", "project-lead"]`
- Gateway restarted successfully at 16:13 CST

### Status
üî¨ **LIVE TEST** - First autonomous Research Lead run in progress
üìä Monitoring for completion announcement (~16:50-17:05 CST estimate)

## Orchestrator Session Creation - Critical Learning (16:19-16:24 CST)

### Problem
Kelly repeatedly tried to spawn Project Lead and Research Lead as sub-agents using `sessions_spawn()`. This fails because:
- Sub-agents CANNOT spawn their own sub-agents
- PL and RL need to spawn John, Sally, Winston, etc.
- Therefore PL and RL must be FULL sessions (orchestrators), not sub-agents

### Root Cause
Missing documentation in Kelly's AGENTS.md on how to create orchestrator sessions. Kelly kept asking the operator "how do I create a new PL session?"

### Solution
**Added "Creating New Orchestrator Sessions" section to AGENTS.md**

**Correct method:**
```bash
openclaw agent \
  --agent project-lead \
  --session-id project-{projectId} \
  --message "Start new project..."
```

This creates a NEW top-level session that can spawn sub-agents.

**Wrong method (Kelly kept trying this):**
```javascript
sessions_spawn({ agentId: "project-lead", ... })
```
This spawns PL as Kelly's sub-agent ‚Üí can't spawn its own sub-agents ‚Üí fails.

### Session Hierarchy
```
Kelly (main session) 
‚îú‚îÄ> PL orchestrator session ‚îÄ‚îÄ> John, Sally, Winston (sub-agents)
‚îî‚îÄ> RL orchestrator session ‚îÄ‚îÄ> Mary, Carson, Victor (sub-agents)
```

### Documentation Update
- Added complete CLI examples to AGENTS.md
- Fixed Research Lead workflow (was using sessions_spawn incorrectly)
- Clarified PL/RL are full sessions, not sub-agents
- Committed as `51ffc79`: "docs: add orchestrator session creation protocol to AGENTS.md"

### First Correct Usage
- Created fleai-market-v5 Project Lead session at 16:24 CST
- Session key: `agent:project-lead:project-fleai-market-v5`
- Running Normal Greenfield mode (full BMAD planning)
- Kelly will never ask "how do I create a PL session" again

### Key Lesson
**Tools vs Documentation:** Some critical workflows need documentation in AGENTS.md, not new tools. Creating orchestrator sessions is Kelly's core responsibility ‚Äî she needed procedural guidance, not a new skill.

## kelly-dashboard Downtime Fix (16:23-16:28 CST)

### Problem
- Operator reported dashboard down/stuck reloading
- Dashboard dev server was running from old location: `projects/kelly-dashboard`
- All API routes returning 404 (looking for `projects/{name}/project-state.json`)
- Projects had moved to new structure: `projects/active/{name}/`

### Root Cause
Factory folder reorganization moved projects to `active/ideas/shipped/archived` subfolders, but:
1. Dashboard dev server still running from old location
2. API routes hardcoded to old path structure
3. launchd service config had old paths

### Fix Applied
1. **Killed old dev server** processes (PIDs 70826, 70827)
2. **Started fresh dev server** from correct location: `projects/active/kelly-dashboard`
3. **Updated API route** (`app/api/project-state/route.ts`):
   - Changed from single folder search to multi-folder search
   - Now searches: active/, ideas/, shipped/, archived/
   - Backward compatible with old projects
4. **Fixed launchd service** (`~/Library/LaunchAgents/ai.openclaw.kelly-dashboard.plist`):
   - WorkingDirectory: `projects/kelly-dashboard` ‚Üí `projects/active/kelly-dashboard`
   - Binary path: updated to new location
   - Log paths: updated to new location

### Result
‚úÖ Dashboard operational at http://localhost:3000
‚úÖ API routes returning 200 (finding project-state.json in new locations)
‚úÖ launchd service will work correctly on next system restart

### Lesson
Infrastructure updates (folder structure changes) require corresponding updates to:
- Running services/dev servers
- API route path logic
- System service configs (launchd, systemd, etc.)

## API Billing Error (16:28 CST)

### Incident
Research Lead task `research-20260217-1613` hit billing error after 14m11s
- **Session:** agent:research-lead:subagent:0846df01-4562-4255-a586-55698bb67dc0
- **Error:** API provider out of credits / insufficient balance
- **Runtime:** 14m11s (out of expected 36-52 min)
- **Tokens:** 200k context (259 in / 37.1k out)
- **Impact:** Task incomplete, operator needs to top up API account

### Status
‚ö†Ô∏è **BLOCKING** - All Research Lead + CIS agent tasks blocked until API credits restored

### Action Required
Operator must top up API provider account or switch to different API key

## Session Creation Mechanics - Corrected Understanding (16:49 CST)

### `openclaw agent --session-id` Does NOT Control Session Key

**Discovery:** `--session-id` flag on `openclaw agent` controls the **internal UUID**, NOT the session key suffix.

**Evidence:**
- Ran: `openclaw agent --agent research-lead --session-id test-20260217-1641 --message "..."`
- Expected key: `agent:research-lead:test-20260217-1641`
- Actual key: `agent:research-lead:main`
- The `--session-id` value was used as the internal UUID, not the routing key

### Three Methods Compared

| Method | Full orchestrator? | Controls session key? | Use when |
|--------|---|---|---|
| `openclaw agent --agent <id>` | ‚úÖ Yes | ‚ùå Always `:main` | Single RL session, one-off tasks |
| `openclaw gateway call agent --params '{"sessionKey":"..."}'` | ‚úÖ Yes | ‚úÖ Exact key | Per-project PL sessions, batch RL |
| `sessions_spawn(...)` | ‚ùå Subagent | N/A | Never for PL/RL |

### AGENTS.md Correction
- **Previous commit `51ffc79`:** Marked `openclaw agent --session-id` as "WRONG" (too harsh)
- **Fix commit `f2dcfbd`:** Changed to "‚ö†Ô∏è LIMITED" ‚Äî it works but always routes to `:main`
- **`gateway call agent`** remains the "‚úÖ CORRECT" method for custom session keys
- `idempotencyKey` is required (use `uuidgen`)

### Key Insight
Session KEY (routing identity) ‚â† Session ID (internal UUID). The CLI `--session-id` sets the latter. Only `gateway call agent` with explicit `sessionKey` param sets the former.

## fleai-market-v5 BMAD Progress (16:49 CST)

### Planning Pipeline Status
- **PL Session:** `agent:project-lead:project-fleai-market-v5` (active, fresh context)
- **John (PRD):** Attempt 3 ‚Äî active, fresh restart
- **Sally (UX Design):** ‚úÖ COMPLETE ‚Äî 9m8s, 20+ wireframes, 5 user flows, full design system
- **Winston (Architecture):** üü° ACTIVE ‚Äî system architecture in progress
- **Artifacts created:** intake.md, prd.md, ux-design.md
- **Artifacts pending:** architecture.md, epics, stories-parallelization.json

### Research Lead Run #2
- **Session:** `agent:research-lead:main` (full orchestrator, 125k/200k context)
- **Created via:** `openclaw agent --agent research-lead` (routes to `:main`, fine for single session)
- **Status:** Running autonomously
- **Previous attempt:** Hit billing error at 14m; this run appears to be progressing

